<div [@simpleFadeAnimation]="'in'" class="inner">
  <div class="example-loading-shade" *ngIf="isLoading">
    <mat-spinner *ngIf="isLoading" class="spinner"></mat-spinner>
  </div>
  <mat-card class="mat-card">

    <div class="mat-card-header">
      <button type="button" mat-button color="primary" matTooltip="Save" (click)="Back()">
        <mat-icon>arrow_back</mat-icon>
      </button>
      <mat-card-title>Message Details</mat-card-title>
      <span class="spacer"></span>
    </div>
    <div class="div-p5 table-largerow">
      <div fxLayout="column" fxLayout.sm="column" fxLayout.xs="column" fxLayoutWrap fxLayoutGap="15px"
        fxLayoutAlign="start">
        <div fxFlex="100%" fxLayout="row" fxLayout.sm="column" fxLayout.xs="column" fxLayoutWrap fxLayoutGap="15px"
          fxLayoutAlign="start">
          <div class="messagetext">
            <span class="span-dec">❝</span>{{message.message}}<span class="span-dec">❞</span><br />
            <div class="div-timesent" align="end">
              <mat-icon class="icon-small">done</mat-icon>
              {{message.datecreated | date : 'dd/MM/yyyy hh:mm:ss aa'}}
            </div>
          </div>
        </div>
      </div>
    </div>
  </mat-card>

  <div class="div-second" fxLayout="row" fxLayout.sm="column" fxLayout.xs="column" fxLayoutWrap fxLayoutGap="15px"
    fxLayoutAlign="start">

    <div fxFlex="50%" *ngIf="messagesGuardians.length > 0 || message.guardiansUnreadCount > 0">
      <mat-card class="mat-card-for-table">
        <div class="mat-card-header mat-card-header-for-table">
          <mat-card-title>Guardians <span *ngIf="message.guardiansUnreadCount > 0"
              class="div-remaining">({{message.guardiansUnreadCount}}
              remaining)</span></mat-card-title>
          <span class="spacer"></span>
        </div>
        <table mat-table [dataSource]="messagesGuardians" class="table-largerow" style="width:100%;">
          <ng-container matColumnDef="name">

            <td mat-cell *matCellDef="let element">
              <div class="span-name">{{element.guardian.name }} - {{element.guardian.mobile}} </div>

              <span *ngIf="element.delivered != null">
                <mat-icon class="icon-small gray">done_all</mat-icon>
                <span class="div-timesent">{{element.delivered | date : 'dd/MM/yyyy hh:mm:ss aa'}}</span>
              </span>&nbsp;&nbsp;
              <span *ngIf="element.read != null">
                <mat-icon class="icon-small" color="primary">done_all</mat-icon>
                <span class="div-timesent">{{element.read | date : 'dd/MM/yyyy hh:mm:ss aa'}}</span>
              </span>

            </td>
          </ng-container>

          <tr mat-row *matRowDef="let row; columns: displayedColumns;" color="primary"
            [ngClass]="{'highlight': selectedRowIndex == row.id}"></tr>
        </table>
      </mat-card>

    </div>

    <div fxFlex="50%" *ngIf="messagesStudents.length > 0 || message.studentsUnreadCount > 0">
      <mat-card class="mat-card-for-table">
        <div class="mat-card-header mat-card-header-for-table">
          <mat-card-title>Students <span *ngIf="message.studentsUnreadCount > 0"
              class="div-remaining">({{message.studentsUnreadCount}} remaining)</span></mat-card-title>
          <span class="spacer"></span>
        </div>
        <table mat-table [dataSource]="messagesStudents" class="table-largerow" style="width:100%;">
          <ng-container matColumnDef="name">

            <td mat-cell *matCellDef="let element">
              <div class="span-name"> {{element.student.name }} - {{element.student.mobile}} </div>
              <span *ngIf="element.delivered != null">
                <mat-icon class="icon-small gray">done_all</mat-icon>
                <span class="div-timesent">{{element.delivered | date : 'dd/MM/yyyy hh:mm:ss aa'}}</span>
              </span>&nbsp;&nbsp;
              <span *ngIf="element.read != null">
                <mat-icon class="icon-small" color="primary">done_all</mat-icon>
                <span class="div-timesent">{{element.read | date : 'dd/MM/yyyy hh:mm:ss aa'}}
                </span>
              </span>

            </td>
          </ng-container>

          <tr mat-row *matRowDef="let row; columns: displayedColumns;" color="primary"
            [ngClass]="{'highlight': selectedRowIndex == row.id}"></tr>
        </table>
      </mat-card>
    </div>

  </div>
</div>